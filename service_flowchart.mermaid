graph TD
    subgraph "1. 신청 단계"
        A[사용자: 경매 물건 검색 및 입찰 신청] --> B[사용자: 계약서 서명 및 결제 진행];
        B --> C{결제 완료};
    end

    subgraph "2. 준비 단계"
        C --> D[관리자: 신규 계약 확인 후 대리인 배정];
        C --> E[사용자: 서류 제출 요청 받음];
        C --> E1[사용자: 보증금 안내 받음];
        D --> F[대리인: 배정 알림 확인 및 서류 다운로드];
        E --> G{사용자: 전자본인서명확인서 제출};
        E1 --> G1{사용자: 보증금 입금};
    end

    subgraph "3. 경매 전 단계"
        G -- 제출 완료 --> H[대리인: 사용자 서류 제출 확인];
        G -- 마감까지 미제출 --> I[계약 자동 취소];
        G1 -- 입금 완료 --> H1[대리인: 보증금 수령 확인 처리];
        G1 -- 미입금 --> I;
        H1 --> H2[사용자: 보증금 수령 확인 알림 받음];
        H --> H3[서류 및 보증금 확인 완료];
        H2 --> H3;
        H3 --> J{입찰가 수정 여부};
        J -- 예 --> K[사용자: 입찰가 수정];
        K --> L[대리인: 변경된 입찰가 알림 확인];
        J -- 아니오 --> M[경매일 대기];
        L --> M;
    end

    subgraph "4. 경매 당일"
        M --> N{대리인: 준비 완료 버튼 클릭};
        N -- 2시간 내 미클릭 --> O[관리자: 대리인 미준비 상태 알림 받음];
        N -- 클릭 --> P[대리인: 경매 참여];
        P --> Q(경매 당일 4시);
    end

    subgraph "5. 종료 단계"
        Q --> R[대리인에게 결과 입력 요청 알림톡 발송];
        R --> S[대리인: 알림톡 링크로 결과 입력];
        S --> T[사용자에게 결과 확인 알림톡 발송];
        T --> U[사용자: 최종 결과 확인];
        U --> V((서비스 종료));
        I --> V;
    end

    style V fill:#f9f,stroke:#333,stroke-width:4px
